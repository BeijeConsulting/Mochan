<!doctype html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="./css/main.css">
    <link href="https://fonts.googleapis.com/css?family=Cutive+Mono|Lato&display=swap" rel="stylesheet">
    <title>Cesio Calculator</title>
</head>

<body>
    <div class="container">
        <div class="header">
        <h1>Cesio Calculator</h1>
        </div>
        <div class="result">
        <p id="display" class="nres">0</p>
        </div>
        <div class="subcont">
        <div class="line">
            <div class="number" onclick="push(this)">1</div>
            <div class="number" onclick="push(this)">2</div>
            <div class="number" onclick="push(this)">3</div>
            <div class="number" onclick="operation(this)">+</div>
        </div>    
<div class="line">
            <div class="number" onclick="push(this)">4</div>
            <div class="number" onclick="push(this)">5</div>
            <div class="number" onclick="push(this)">6</div>
            <div class="number" onclick="operation(this)">-</div>
        </div>   
<div class="line">
            <div class="number" onclick="push(this)">7</div>
            <div class="number" onclick="push(this)">8</div>
            <div class="number" onclick="push(this)">9</div>
            <div class="number" onclick="operation(this)">*</div>
        </div>   
<div class="line">
            <div class="number reset" onclick="reset()">AC</div>
            <div class="number" onclick="push(this)">0</div>
            <div class="number" onclick="decimal()">,</div>
            <div class="number" onclick="operation(this)">/</div>
        </div>   
<div class="fline" onclick="equal()">=</div>
</div>
</div>
</body>

<script>
var display = document.getElementById('display');
var d = '';
var isDecimal = false;
var op1 = 0;
var op2 = 0;
var operator = null;

function push(el) {
	let value = el.innerHTML;
	console.log(value);
	d = d + value;
	display.innerHTML = d;
}

function reset() {
	d = '';
	isDecimal = false;
	op1 = 0;
	op2 = 0;
	operator = null;
	
	display.innerHTML = 0;
}

function decimal() {
    if (!isDecimal) {
		d = d + '.';
		isDecimal = true;
	}
}

function operation(el) {
	let value = el.innerHTML;
	if (operator == null) {
		if (d != '') {
			op1 = parseFloat(d);
		}/* else if (op1 == null) {
			op1 = 0;
		}*/
		d = '';
	} else {
		equal();
	}
	operator = value;
	console.log('op1 : ' + op1);
	console.log('op2 : ' + op2);
	console.log('operator : ' + operator);
	console.log('d : ' + d);
}

function equal() {
	op2 = parseFloat(d);
	op1 = calc(op1, op2, operator);
	op2 = 0;
	operator = null;
	d = '';
	isDecimal = false;
	display.innerHTML = op1;
}

function calc(o1, o2, oper) {
	switch (oper) {
		case '+' : return o1 + o2;
		case '-' : return o1 - o2;
		case '*' : return o1 * o2;
		case '/' : return o1 / o2;
	}
}

</script>
</html>
